{"version":3,"file":"inspector.js","sources":["../src/trix/core/helpers/arrays.js","../src/trix/config/attachments.js","../src/trix/config/block_attributes.js","../src/trix/config/browser.js","../src/trix/config/css.js","../src/trix/config/lang.js","../src/trix/config/file_size_formatting.js","../src/trix/config/input.js","../src/trix/config/key_names.js","../src/trix/config/text_attributes.js","../src/trix/config/toolbar.js","../src/trix/config/undo_interval.js","../src/trix/config.js","../src/trix/constants.js","../src/trix/core/helpers/extend.js","../src/trix/core/helpers/dom.js","../src/trix/core/helpers/bidi.js","../src/trix/core/helpers/config.js","../src/trix/core/helpers/custom_elements.js","../src/trix/core/helpers/events.js","../src/trix/core/helpers/functions.js","../src/trix/core/helpers/objects.js","../src/trix/core/helpers/ranges.js","../src/trix/core/basic_object.js","../src/trix/observers/selection_change_observer.js","../src/trix/core/utilities/utf16_string.js","../src/trix/core/helpers/strings.js","../src/inspector/element.js","../src/inspector/global.js","../src/inspector/templates/debug.js","../src/inspector/templates/document.js","../src/inspector/templates/performance.js","../src/inspector/templates/render.js","../src/inspector/templates/selection.js","../src/inspector/templates/undo.js","../src/inspector/control_element.js","../src/inspector/view.js","../src/inspector/views/debug_view.js","../src/inspector/views/document_view.js","../src/inspector/views/performance_view.js","../src/inspector/views/render_view.js","../src/inspector/views/selection_view.js","../src/inspector/views/undo_view.js"],"sourcesContent":["/* eslint-disable\n    id-length,\n*/\nexport const arraysAreEqual = function(a = [], b = []) {\n  if (a.length !== b.length) {\n    return false\n  }\n  for (let index = 0; index < a.length; index++) {\n    const value = a[index]\n    if (value !== b[index]) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const arrayStartsWith = (a = [], b = []) => arraysAreEqual(a.slice(0, b.length), b)\n\nexport const spliceArray = function(array, ...args) {\n  const result = array.slice(0)\n  result.splice(...args)\n  return result\n}\n\nexport const summarizeArrayChange = function(oldArray = [], newArray = []) {\n  const added = []\n  const removed = []\n\n  const existingValues = new Set()\n\n  oldArray.forEach((value) => {\n    existingValues.add(value)\n  })\n\n  const currentValues = new Set()\n\n  newArray.forEach((value) => {\n    currentValues.add(value)\n    if (!existingValues.has(value)) {\n      added.push(value)\n    }\n  })\n\n  oldArray.forEach((value) => {\n    if (!currentValues.has(value)) {\n      removed.push(value)\n    }\n  })\n\n  return { added, removed }\n}\n","export const attachmentSelector = \"[data-trix-attachment]\"\n\nconst attachments = {\n  preview: {\n    presentation: \"gallery\",\n    caption: {\n      name: true,\n      size: true,\n    },\n  },\n  file: {\n    caption: {\n      size: true,\n    },\n  },\n}\nexport default attachments\n","const attributes = {\n  default: {\n    tagName: \"div\",\n    parse: false,\n  },\n  quote: {\n    tagName: \"blockquote\",\n    nestable: true,\n  },\n  heading1: {\n    tagName: \"h1\",\n    terminal: true,\n    breakOnReturn: true,\n    group: false,\n  },\n  code: {\n    tagName: \"pre\",\n    terminal: true,\n    text: {\n      plaintext: true,\n    },\n  },\n  bulletList: {\n    tagName: \"ul\",\n    parse: false,\n  },\n  bullet: {\n    tagName: \"li\",\n    listAttribute: \"bulletList\",\n    group: false,\n    nestable: true,\n    test(element) {\n      return tagName(element.parentNode) === attributes[this.listAttribute].tagName\n    },\n  },\n  numberList: {\n    tagName: \"ol\",\n    parse: false,\n  },\n  number: {\n    tagName: \"li\",\n    listAttribute: \"numberList\",\n    group: false,\n    nestable: true,\n    test(element) {\n      return tagName(element.parentNode) === attributes[this.listAttribute].tagName\n    },\n  },\n  attachmentGallery: {\n    tagName: \"div\",\n    exclusive: true,\n    terminal: true,\n    parse: false,\n    group: false,\n  },\n}\n\nconst tagName = (element) => element?.tagName?.toLowerCase()\n\nexport default attributes\n","export default {\n  // Android emits composition events when moving the cursor through existing text\n  // Introduced in Chrome 65: https://bugs.chromium.org/p/chromium/issues/detail?id=764439#c9\n  composesExistingText: /Android.*Chrome/.test(navigator.userAgent),\n  // IE 11 activates resizing handles on editable elements that have \"layout\"\n  forcesObjectResizing: /Trident.*rv:11/.test(navigator.userAgent),\n  // https://www.w3.org/TR/input-events-1/ + https://www.w3.org/TR/input-events-2/\n  supportsInputEvents: (function() {\n    if (typeof InputEvent === \"undefined\") {\n      return false\n    }\n    for (const property of [ \"data\", \"getTargetRanges\", \"inputType\" ]) {\n      if (!(property in InputEvent.prototype)) {\n        return false\n      }\n    }\n    return true\n  })(),\n}\n","export default {\n  attachment: \"attachment\",\n  attachmentCaption: \"attachment__caption\",\n  attachmentCaptionEditor: \"attachment__caption-editor\",\n  attachmentMetadata: \"attachment__metadata\",\n  attachmentMetadataContainer: \"attachment__metadata-container\",\n  attachmentName: \"attachment__name\",\n  attachmentProgress: \"attachment__progress\",\n  attachmentSize: \"attachment__size\",\n  attachmentToolbar: \"attachment__toolbar\",\n  attachmentGallery: \"attachment-gallery\",\n}\n","export default {\n  attachFiles: \"Attach Files\",\n  bold: \"Bold\",\n  bullets: \"Bullets\",\n  byte: \"Byte\",\n  bytes: \"Bytes\",\n  captionPlaceholder: \"Add a caption…\",\n  code: \"Code\",\n  heading1: \"Heading\",\n  indent: \"Increase Level\",\n  italic: \"Italic\",\n  link: \"Link\",\n  numbers: \"Numbers\",\n  outdent: \"Decrease Level\",\n  quote: \"Quote\",\n  redo: \"Redo\",\n  remove: \"Remove\",\n  strike: \"Strikethrough\",\n  undo: \"Undo\",\n  unlink: \"Unlink\",\n  url: \"URL\",\n  urlPlaceholder: \"Enter a URL…\",\n  GB: \"GB\",\n  KB: \"KB\",\n  MB: \"MB\",\n  PB: \"PB\",\n  TB: \"TB\",\n}\n","/* eslint-disable\n    no-case-declarations,\n*/\nimport lang from \"trix/config/lang\"\n\nconst sizes = [ lang.bytes, lang.KB, lang.MB, lang.GB, lang.TB, lang.PB ]\n\nexport default {\n  prefix: \"IEC\",\n  precision: 2,\n\n  formatter(number) {\n    switch (number) {\n      case 0:\n        return `0 ${lang.bytes}`\n      case 1:\n        return `1 ${lang.byte}`\n      default:\n        let base\n\n        if (this.prefix === \"SI\") {\n          base = 1000\n        } else if (this.prefix === \"IEC\") {\n          base = 1024\n        }\n\n        const exp = Math.floor(Math.log(number) / Math.log(base))\n        const humanSize = number / Math.pow(base, exp)\n        const string = humanSize.toFixed(this.precision)\n        const withoutInsignificantZeros = string.replace(/0*$/, \"\").replace(/\\.$/, \"\")\n        return `${withoutInsignificantZeros} ${sizes[exp]}`\n    }\n  },\n}\n","import browser from \"trix/config/browser\"\n\nconst input = {\n  level2Enabled: true,\n\n  getLevel() {\n    if (this.level2Enabled && browser.supportsInputEvents) {\n      return 2\n    } else {\n      return 0\n    }\n  },\n}\n\nexport default input\n","export default {\n  8: \"backspace\",\n  9: \"tab\",\n  13: \"return\",\n  27: \"escape\",\n  37: \"left\",\n  39: \"right\",\n  46: \"delete\",\n  68: \"d\",\n  72: \"h\",\n  79: \"o\",\n}\n","import { attachmentSelector } from \"trix/config/attachments\"\n\nexport default {\n  bold: {\n    tagName: \"strong\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontWeight === \"bold\" || style.fontWeight >= 600\n    },\n  },\n  italic: {\n    tagName: \"em\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontStyle === \"italic\"\n    },\n  },\n  href: {\n    groupTagName: \"a\",\n    parser(element) {\n      const matchingSelector = `a:not(${attachmentSelector})`\n      const link = element.closest(matchingSelector)\n      if (link) {\n        return link.getAttribute(\"href\")\n      }\n    },\n  },\n  strike: {\n    tagName: \"del\",\n    inheritable: true,\n  },\n  frozen: {\n    style: { backgroundColor: \"highlight\" },\n  },\n}\n","import lang from \"trix/config/lang\"\n\nexport default {\n  getDefaultHTML() {\n    return `\\\n<div class=\"trix-button-row\">\n  <span class=\"trix-button-group trix-button-group--text-tools\" data-trix-button-group=\"text-tools\">\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bold\" data-trix-attribute=\"bold\" data-trix-key=\"b\" title=\"${lang.bold}\" tabindex=\"-1\">${lang.bold}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-italic\" data-trix-attribute=\"italic\" data-trix-key=\"i\" title=\"${lang.italic}\" tabindex=\"-1\">${lang.italic}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-strike\" data-trix-attribute=\"strike\" title=\"${lang.strike}\" tabindex=\"-1\">${lang.strike}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-link\" data-trix-attribute=\"href\" data-trix-action=\"link\" data-trix-key=\"k\" title=\"${lang.link}\" tabindex=\"-1\">${lang.link}</button>\n  </span>\n\n  <span class=\"trix-button-group trix-button-group--block-tools\" data-trix-button-group=\"block-tools\">\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-heading-1\" data-trix-attribute=\"heading1\" title=\"${lang.heading1}\" tabindex=\"-1\">${lang.heading1}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-quote\" data-trix-attribute=\"quote\" title=\"${lang.quote}\" tabindex=\"-1\">${lang.quote}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-code\" data-trix-attribute=\"code\" title=\"${lang.code}\" tabindex=\"-1\">${lang.code}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bullet-list\" data-trix-attribute=\"bullet\" title=\"${lang.bullets}\" tabindex=\"-1\">${lang.bullets}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-number-list\" data-trix-attribute=\"number\" title=\"${lang.numbers}\" tabindex=\"-1\">${lang.numbers}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-decrease-nesting-level\" data-trix-action=\"decreaseNestingLevel\" title=\"${lang.outdent}\" tabindex=\"-1\">${lang.outdent}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-increase-nesting-level\" data-trix-action=\"increaseNestingLevel\" title=\"${lang.indent}\" tabindex=\"-1\">${lang.indent}</button>\n  </span>\n\n  <span class=\"trix-button-group trix-button-group--file-tools\" data-trix-button-group=\"file-tools\">\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-attach\" data-trix-action=\"attachFiles\" title=\"${lang.attachFiles}\" tabindex=\"-1\">${lang.attachFiles}</button>\n  </span>\n\n  <span class=\"trix-button-group-spacer\"></span>\n\n  <span class=\"trix-button-group trix-button-group--history-tools\" data-trix-button-group=\"history-tools\">\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-undo\" data-trix-action=\"undo\" data-trix-key=\"z\" title=\"${lang.undo}\" tabindex=\"-1\">${lang.undo}</button>\n    <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-redo\" data-trix-action=\"redo\" data-trix-key=\"shift+z\" title=\"${lang.redo}\" tabindex=\"-1\">${lang.redo}</button>\n  </span>\n</div>\n\n<div class=\"trix-dialogs\" data-trix-dialogs>\n  <div class=\"trix-dialog trix-dialog--link\" data-trix-dialog=\"href\" data-trix-dialog-attribute=\"href\">\n    <div class=\"trix-dialog__link-fields\">\n      <input type=\"url\" name=\"href\" class=\"trix-input trix-input--dialog\" placeholder=\"${lang.urlPlaceholder}\" aria-label=\"${lang.url}\" required data-trix-input>\n      <div class=\"trix-button-group\">\n        <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.link}\" data-trix-method=\"setAttribute\">\n        <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.unlink}\" data-trix-method=\"removeAttribute\">\n      </div>\n    </div>\n  </div>\n</div>\\\n`\n  },\n}\n","const undoInterval = 5000\nexport default undoInterval\n","import attachments from \"trix/config/attachments\"\nimport blockAttributes from \"trix/config/block_attributes\"\nimport browser from \"trix/config/browser\"\nimport css from \"trix/config/css\"\nimport fileSize from \"trix/config/file_size_formatting\"\nimport input from \"trix/config/input\"\nimport keyNames from \"trix/config/key_names\"\nimport lang from \"trix/config/lang\"\nimport textAttributes from \"trix/config/text_attributes\"\nimport toolbar from \"trix/config/toolbar\"\nimport undoInterval from \"trix/config/undo_interval\"\n\nconst config = {\n  attachments,\n  blockAttributes,\n  browser,\n  css,\n  fileSize,\n  input,\n  keyNames,\n  lang,\n  textAttributes,\n  toolbar,\n  undoInterval,\n}\n\nexport default config\n","export const ZERO_WIDTH_SPACE = \"\\uFEFF\"\nexport const NON_BREAKING_SPACE = \"\\u00A0\"\nexport const OBJECT_REPLACEMENT_CHARACTER = \"\\uFFFC\"\n","export const extend = function(properties) {\n  for (const key in properties) {\n    const value = properties[key]\n    this[key] = value\n  }\n  return this\n}\n","import config from \"trix/config\"\nimport { ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport { extend } from \"./extend\"\nimport { attachmentSelector } from \"trix/config/attachments\"\n\nconst html = document.documentElement\nconst match = html.matches\n\nexport const handleEvent = function(eventName, { onElement, matchingSelector, withCallback, inPhase, preventDefault, times } = {}) {\n  const element = onElement ? onElement : html\n  const selector = matchingSelector\n  const useCapture = inPhase === \"capturing\"\n\n  const handler = function(event) {\n    if (times != null && --times === 0) {\n      handler.destroy()\n    }\n    const target = findClosestElementFromNode(event.target, { matchingSelector: selector })\n    if (target != null) {\n      withCallback?.call(target, event, target)\n      if (preventDefault) {\n        event.preventDefault()\n      }\n    }\n  }\n\n  handler.destroy = () => element.removeEventListener(eventName, handler, useCapture)\n\n  element.addEventListener(eventName, handler, useCapture)\n  return handler\n}\n\nexport const handleEventOnce = function(eventName, options = {}) {\n  options.times = 1\n  return handleEvent(eventName, options)\n}\n\nexport const triggerEvent = function(eventName, { onElement, bubbles, cancelable, attributes } = {}) {\n  const element = onElement != null ? onElement : html\n  bubbles = bubbles !== false\n  cancelable = cancelable !== false\n\n  const event = document.createEvent(\"Events\")\n  event.initEvent(eventName, bubbles, cancelable)\n  if (attributes != null) {\n    extend.call(event, attributes)\n  }\n  return element.dispatchEvent(event)\n}\n\nexport const elementMatchesSelector = function(element, selector) {\n  if (element?.nodeType === 1) {\n    return match.call(element, selector)\n  }\n}\n\nexport const findClosestElementFromNode = function(node, { matchingSelector, untilNode } = {}) {\n  while (node && node.nodeType !== Node.ELEMENT_NODE) {\n    node = node.parentNode\n  }\n  if (node == null) {\n    return\n  }\n\n  if (matchingSelector != null) {\n    if (node.closest && untilNode == null) {\n      return node.closest(matchingSelector)\n    } else {\n      while (node && node !== untilNode) {\n        if (elementMatchesSelector(node, matchingSelector)) {\n          return node\n        }\n        node = node.parentNode\n      }\n    }\n  } else {\n    return node\n  }\n}\n\nexport const findInnerElement = function(element) {\n  while (element?.firstElementChild) {\n    element = element.firstElementChild\n  }\n  return element\n}\n\nexport const innerElementIsActive = (element) =>\n  document.activeElement !== element && elementContainsNode(element, document.activeElement)\n\nexport const elementContainsNode = function(element, node) {\n  if (!element || !node) {\n    return\n  }\n  while (node) {\n    if (node === element) {\n      return true\n    }\n    node = node.parentNode\n  }\n}\n\nexport const findNodeFromContainerAndOffset = function(container, offset) {\n  if (!container) {\n    return\n  }\n  if (container.nodeType === Node.TEXT_NODE) {\n    return container\n  } else if (offset === 0) {\n    return container.firstChild != null ? container.firstChild : container\n  } else {\n    return container.childNodes.item(offset - 1)\n  }\n}\n\nexport const findElementFromContainerAndOffset = function(container, offset) {\n  const node = findNodeFromContainerAndOffset(container, offset)\n  return findClosestElementFromNode(node)\n}\n\nexport const findChildIndexOfNode = function(node) {\n  if (!node?.parentNode) {\n    return\n  }\n  let childIndex = 0\n  node = node.previousSibling\n  while (node) {\n    childIndex++\n    node = node.previousSibling\n  }\n  return childIndex\n}\n\nexport const removeNode = (node) => node?.parentNode?.removeChild(node)\n\nexport const walkTree = function(tree, { onlyNodesOfType, usingFilter, expandEntityReferences } = {}) {\n  const whatToShow = (() => {\n    switch (onlyNodesOfType) {\n      case \"element\":\n        return NodeFilter.SHOW_ELEMENT\n      case \"text\":\n        return NodeFilter.SHOW_TEXT\n      case \"comment\":\n        return NodeFilter.SHOW_COMMENT\n      default:\n        return NodeFilter.SHOW_ALL\n    }\n  })()\n\n  return document.createTreeWalker(\n    tree,\n    whatToShow,\n    usingFilter != null ? usingFilter : null,\n    expandEntityReferences === true\n  )\n}\n\nexport const tagName = (element) => element?.tagName?.toLowerCase()\n\nexport const makeElement = function(tag, options = {}) {\n  let key, value\n  if (typeof tag === \"object\") {\n    options = tag\n    tag = options.tagName\n  } else {\n    options = { attributes: options }\n  }\n\n  const element = document.createElement(tag)\n\n  if (options.editable != null) {\n    if (options.attributes == null) {\n      options.attributes = {}\n    }\n    options.attributes.contenteditable = options.editable\n  }\n\n  if (options.attributes) {\n    for (key in options.attributes) {\n      value = options.attributes[key]\n      element.setAttribute(key, value)\n    }\n  }\n\n  if (options.style) {\n    for (key in options.style) {\n      value = options.style[key]\n      element.style[key] = value\n    }\n  }\n\n  if (options.data) {\n    for (key in options.data) {\n      value = options.data[key]\n      element.dataset[key] = value\n    }\n  }\n\n  if (options.className) {\n    options.className.split(\" \").forEach((className) => {\n      element.classList.add(className)\n    })\n  }\n\n  if (options.textContent) {\n    element.textContent = options.textContent\n  }\n\n  if (options.childNodes) {\n    [].concat(options.childNodes).forEach((childNode) => {\n      element.appendChild(childNode)\n    })\n  }\n\n  return element\n}\n\nlet blockTagNames = undefined\n\nexport const getBlockTagNames = function() {\n  if (blockTagNames != null) {\n    return blockTagNames\n  }\n\n  blockTagNames = []\n  for (const key in config.blockAttributes) {\n    const attributes = config.blockAttributes[key]\n    if (attributes.tagName) {\n      blockTagNames.push(attributes.tagName)\n    }\n  }\n\n  return blockTagNames\n}\n\nexport const nodeIsBlockContainer = (node) => nodeIsBlockStartComment(node?.firstChild)\n\nexport const nodeProbablyIsBlockContainer = function(node) {\n  return getBlockTagNames().includes(tagName(node)) && !getBlockTagNames().includes(tagName(node.firstChild))\n}\n\nexport const nodeIsBlockStart = function(node, { strict } = { strict: true }) {\n  if (strict) {\n    return nodeIsBlockStartComment(node)\n  } else {\n    return (\n      nodeIsBlockStartComment(node) || !nodeIsBlockStartComment(node.firstChild) && nodeProbablyIsBlockContainer(node)\n    )\n  }\n}\n\nexport const nodeIsBlockStartComment = (node) => nodeIsCommentNode(node) && node?.data === \"block\"\n\nexport const nodeIsCommentNode = (node) => node?.nodeType === Node.COMMENT_NODE\n\nexport const nodeIsCursorTarget = function(node, { name } = {}) {\n  if (!node) {\n    return\n  }\n  if (nodeIsTextNode(node)) {\n    if (node.data === ZERO_WIDTH_SPACE) {\n      if (name) {\n        return node.parentNode.dataset.trixCursorTarget === name\n      } else {\n        return true\n      }\n    }\n  } else {\n    return nodeIsCursorTarget(node.firstChild)\n  }\n}\n\nexport const nodeIsAttachmentElement = (node) => elementMatchesSelector(node, attachmentSelector)\n\nexport const nodeIsEmptyTextNode = (node) => nodeIsTextNode(node) && node?.data === \"\"\n\nexport const nodeIsTextNode = (node) => node?.nodeType === Node.TEXT_NODE\n","import { makeElement } from \"trix/core/helpers/dom\"\n\n// https://github.com/mathiasbynens/unicode-2.1.8/blob/master/Bidi_Class/Right_To_Left/regex.js\nconst RTL_PATTERN =\n  /[\\u05BE\\u05C0\\u05C3\\u05D0-\\u05EA\\u05F0-\\u05F4\\u061B\\u061F\\u0621-\\u063A\\u0640-\\u064A\\u066D\\u0671-\\u06B7\\u06BA-\\u06BE\\u06C0-\\u06CE\\u06D0-\\u06D5\\u06E5\\u06E6\\u200F\\u202B\\u202E\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE72\\uFE74\\uFE76-\\uFEFC]/\n\nexport const getDirection = (function() {\n  const input = makeElement(\"input\", { dir: \"auto\", name: \"x\", dirName: \"x.dir\" })\n  const form = makeElement(\"form\")\n  form.appendChild(input)\n\n  const supportsDirName = (function() {\n    try {\n      return new FormData(form).has(input.dirName)\n    } catch (error) {\n      return false\n    }\n  })()\n\n  const supportsDirSelector = (function() {\n    try {\n      return input.matches(\":dir(ltr),:dir(rtl)\")\n    } catch (error) {\n      return false\n    }\n  })()\n\n  if (supportsDirName) {\n    return function(string) {\n      input.value = string\n      return new FormData(form).get(input.dirName)\n    }\n  } else if (supportsDirSelector) {\n    return function(string) {\n      input.value = string\n      if (input.matches(\":dir(rtl)\")) {\n        return \"rtl\"\n      } else {\n        return \"ltr\"\n      }\n    }\n  } else {\n    return function(string) {\n      const char = string.trim().charAt(0)\n      if (RTL_PATTERN.test(char)) {\n        return \"rtl\"\n      } else {\n        return \"ltr\"\n      }\n    }\n  }\n})()\n","import config from \"trix/config\"\n\nlet allAttributeNames = null\nlet blockAttributeNames = null\nlet textAttributeNames = null\nlet listAttributeNames = null\n\nexport const getAllAttributeNames = () => {\n  if (!allAttributeNames) {\n    allAttributeNames = getTextAttributeNames().concat(getBlockAttributeNames())\n  }\n  return allAttributeNames\n}\n\nexport const getBlockConfig = (attributeName) => config.blockAttributes[attributeName]\n\nexport const getBlockAttributeNames = () => {\n  if (!blockAttributeNames) {\n    blockAttributeNames = Object.keys(config.blockAttributes)\n  }\n  return blockAttributeNames\n}\n\nexport const getTextConfig = (attributeName) => config.textAttributes[attributeName]\n\nexport const getTextAttributeNames = () => {\n  if (!textAttributeNames) {\n    textAttributeNames = Object.keys(config.textAttributes)\n  }\n  return textAttributeNames\n}\n\nexport const getListAttributeNames = () => {\n  if (!listAttributeNames) {\n    listAttributeNames = []\n    for (const key in config.blockAttributes) {\n      const { listAttribute } = config.blockAttributes[key]\n      if (listAttribute != null) {\n        listAttributeNames.push(listAttribute)\n      }\n    }\n  }\n  return listAttributeNames\n}\n","/* eslint-disable\n*/\nexport const installDefaultCSSForTagName = function(tagName, defaultCSS) {\n  const styleElement = insertStyleElementForTagName(tagName)\n  styleElement.textContent = defaultCSS.replace(/%t/g, tagName)\n}\n\nconst insertStyleElementForTagName = function(tagName) {\n  const element = document.createElement(\"style\")\n  element.setAttribute(\"type\", \"text/css\")\n  element.setAttribute(\"data-tag-name\", tagName.toLowerCase())\n  const nonce = getCSPNonce()\n  if (nonce) {\n    element.setAttribute(\"nonce\", nonce)\n  }\n  document.head.insertBefore(element, document.head.firstChild)\n  return element\n}\n\nconst getCSPNonce = function() {\n  const element = getMetaElement(\"trix-csp-nonce\") || getMetaElement(\"csp-nonce\")\n  if (element) {\n    return element.getAttribute(\"content\")\n  }\n}\n\nconst getMetaElement = (name) => document.head.querySelector(`meta[name=${name}]`)\n","const testTransferData = { \"application/x-trix-feature-detection\": \"test\" }\n\nexport const dataTransferIsPlainText = function(dataTransfer) {\n  const text = dataTransfer.getData(\"text/plain\")\n  const html = dataTransfer.getData(\"text/html\")\n\n  if (text && html) {\n    const { body } = new DOMParser().parseFromString(html, \"text/html\")\n    if (body.textContent === text) {\n      return !body.querySelector(\"*\")\n    }\n  } else {\n    return text?.length\n  }\n}\n\nexport const dataTransferIsWritable = function(dataTransfer) {\n  if (!dataTransfer?.setData) return false\n\n  for (const key in testTransferData) {\n    const value = testTransferData[key]\n\n    try {\n      dataTransfer.setData(key, value)\n      if (!dataTransfer.getData(key) === value) return false\n    } catch (error) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const keyEventIsKeyboardCommand = (function() {\n  if (/Mac|^iP/.test(navigator.platform)) {\n    return (event) => event.metaKey\n  } else {\n    return (event) => event.ctrlKey\n  }\n})()\n","export const defer = (fn) => setTimeout(fn, 1)\n","/* eslint-disable\n    id-length,\n*/\nexport const copyObject = function(object = {}) {\n  const result = {}\n  for (const key in object) {\n    const value = object[key]\n    result[key] = value\n  }\n  return result\n}\n\nexport const objectsAreEqual = function(a = {}, b = {}) {\n  if (Object.keys(a).length !== Object.keys(b).length) {\n    return false\n  }\n  for (const key in a) {\n    const value = a[key]\n    if (value !== b[key]) {\n      return false\n    }\n  }\n  return true\n}\n","import { copyObject, objectsAreEqual } from \"trix/core/helpers/objects\"\n\nexport const normalizeRange = function(range) {\n  if (range == null) return\n\n  if (!Array.isArray(range)) {\n    range = [ range, range ]\n  }\n  return [ copyValue(range[0]), copyValue(range[1] != null ? range[1] : range[0]) ]\n}\n\nexport const rangeIsCollapsed = function(range) {\n  if (range == null) return\n\n  const [ start, end ] = normalizeRange(range)\n  return rangeValuesAreEqual(start, end)\n}\n\nexport const rangesAreEqual = function(leftRange, rightRange) {\n  if (leftRange == null || rightRange == null) return\n\n  const [ leftStart, leftEnd ] = normalizeRange(leftRange)\n  const [ rightStart, rightEnd ] = normalizeRange(rightRange)\n  return rangeValuesAreEqual(leftStart, rightStart) && rangeValuesAreEqual(leftEnd, rightEnd)\n}\n\nconst copyValue = function(value) {\n  if (typeof value === \"number\") {\n    return value\n  } else {\n    return copyObject(value)\n  }\n}\n\nconst rangeValuesAreEqual = function(left, right) {\n  if (typeof left === \"number\") {\n    return left === right\n  } else {\n    return objectsAreEqual(left, right)\n  }\n}\n","export default class BasicObject {\n  static proxyMethod(expression) {\n    const { name, toMethod, toProperty, optional } = parseProxyMethodExpression(expression)\n\n    this.prototype[name] = function() {\n      let subject\n      let object\n\n      if (toMethod) {\n        if (optional) {\n          object = this[toMethod]?.()\n        } else {\n          object = this[toMethod]()\n        }\n      } else if (toProperty) {\n        object = this[toProperty]\n      }\n\n      if (optional) {\n        subject = object?.[name]\n        if (subject) {\n          return apply.call(subject, object, arguments)\n        }\n      } else {\n        subject = object[name]\n        return apply.call(subject, object, arguments)\n      }\n    }\n  }\n}\n\nconst parseProxyMethodExpression = function(expression) {\n  const match = expression.match(proxyMethodExpressionPattern)\n  if (!match) {\n    throw new Error(`can't parse @proxyMethod expression: ${expression}`)\n  }\n\n  const args = { name: match[4] }\n\n  if (match[2] != null) {\n    args.toMethod = match[1]\n  } else {\n    args.toProperty = match[1]\n  }\n\n  if (match[3] != null) {\n    args.optional = true\n  }\n\n  return args\n}\n\nconst { apply } = Function.prototype\n\nconst proxyMethodExpressionPattern = new RegExp(\"\\\n^\\\n(.+?)\\\n(\\\\(\\\\))?\\\n(\\\\?)?\\\n\\\\.\\\n(.+?)\\\n$\\\n\")\n","/* eslint-disable\n    id-length,\n*/\nimport BasicObject from \"trix/core/basic_object\"\n\nexport default class SelectionChangeObserver extends BasicObject {\n  constructor() {\n    super(...arguments)\n    this.update = this.update.bind(this)\n    this.run = this.run.bind(this)\n    this.selectionManagers = []\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      if (\"onselectionchange\" in document) {\n        return document.addEventListener(\"selectionchange\", this.update, true)\n      } else {\n        return this.run()\n      }\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      return document.removeEventListener(\"selectionchange\", this.update, true)\n    }\n  }\n\n  registerSelectionManager(selectionManager) {\n    if (!this.selectionManagers.includes(selectionManager)) {\n      this.selectionManagers.push(selectionManager)\n      return this.start()\n    }\n  }\n\n  unregisterSelectionManager(selectionManager) {\n    this.selectionManagers = this.selectionManagers.filter((s) => s !== selectionManager)\n    if (this.selectionManagers.length === 0) {\n      return this.stop()\n    }\n  }\n\n  notifySelectionManagersOfSelectionChange() {\n    return this.selectionManagers.map((selectionManager) => selectionManager.selectionDidChange())\n  }\n\n  update() {\n    const domRange = getDOMRange()\n    if (!domRangesAreEqual(domRange, this.domRange)) {\n      this.domRange = domRange\n      return this.notifySelectionManagersOfSelectionChange()\n    }\n  }\n\n  reset() {\n    this.domRange = null\n    return this.update()\n  }\n\n  // Private\n\n  run() {\n    if (this.started) {\n      this.update()\n      return requestAnimationFrame(this.run)\n    }\n  }\n}\n\nconst domRangesAreEqual = (left, right) =>\n  left?.startContainer === right?.startContainer &&\n  left?.startOffset === right?.startOffset &&\n  left?.endContainer === right?.endContainer &&\n  left?.endOffset === right?.endOffset\n\nexport const selectionChangeObserver = new SelectionChangeObserver()\n\nexport const getDOMSelection = function() {\n  const selection = window.getSelection()\n  if (selection.rangeCount > 0) {\n    return selection\n  }\n}\n\nexport const getDOMRange = function() {\n  const domRange = getDOMSelection()?.getRangeAt(0)\n  if (domRange) {\n    if (!domRangeIsPrivate(domRange)) {\n      return domRange\n    }\n  }\n}\n\nexport const setDOMRange = function(domRange) {\n  const selection = window.getSelection()\n  selection.removeAllRanges()\n  selection.addRange(domRange)\n  return selectionChangeObserver.update()\n}\n\n// In Firefox, clicking certain <input> elements changes the selection to a\n// private element used to draw its UI. Attempting to access properties of those\n// elements throws an error.\n// https://bugzilla.mozilla.org/show_bug.cgi?id=208427\nconst domRangeIsPrivate = (domRange) => nodeIsPrivate(domRange.startContainer) || nodeIsPrivate(domRange.endContainer)\n\nconst nodeIsPrivate = (node) => !Object.getPrototypeOf(node)\n","import BasicObject from \"trix/core/basic_object\"\n\nexport default class UTF16String extends BasicObject {\n  static box(value = \"\") {\n    if (value instanceof this) {\n      return value\n    } else {\n      return this.fromUCS2String(value?.toString())\n    }\n  }\n\n  static fromUCS2String(ucs2String) {\n    return new this(ucs2String, ucs2decode(ucs2String))\n  }\n\n  static fromCodepoints(codepoints) {\n    return new this(ucs2encode(codepoints), codepoints)\n  }\n\n  constructor(ucs2String, codepoints) {\n    super(...arguments)\n    this.ucs2String = ucs2String\n    this.codepoints = codepoints\n    this.length = this.codepoints.length\n    this.ucs2Length = this.ucs2String.length\n  }\n\n  offsetToUCS2Offset(offset) {\n    return ucs2encode(this.codepoints.slice(0, Math.max(0, offset))).length\n  }\n\n  offsetFromUCS2Offset(ucs2Offset) {\n    return ucs2decode(this.ucs2String.slice(0, Math.max(0, ucs2Offset))).length\n  }\n\n  slice() {\n    return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))\n  }\n\n  charAt(offset) {\n    return this.slice(offset, offset + 1)\n  }\n\n  isEqualTo(value) {\n    return this.constructor.box(value).ucs2String === this.ucs2String\n  }\n\n  toJSON() {\n    return this.ucs2String\n  }\n\n  getCacheKey() {\n    return this.ucs2String\n  }\n\n  toString() {\n    return this.ucs2String\n  }\n}\n\nconst hasArrayFrom = Array.from?.(\"\\ud83d\\udc7c\").length === 1\nconst hasStringCodePointAt = \" \".codePointAt?.(0) != null\nconst hasStringFromCodePoint = String.fromCodePoint?.(32, 128124) === \" \\ud83d\\udc7c\"\n\n// UCS-2 conversion helpers ported from Mathias Bynens' Punycode.js:\n// https://github.com/bestiejs/punycode.js#punycodeucs2\n\nlet ucs2decode, ucs2encode\n\n// Creates an array containing the numeric code points of each Unicode\n// character in the string. While JavaScript uses UCS-2 internally,\n// this function will convert a pair of surrogate halves (each of which\n// UCS-2 exposes as separate characters) into a single code point,\n// matching UTF-16.\nif (hasArrayFrom && hasStringCodePointAt) {\n  ucs2decode = (string) => Array.from(string).map((char) => char.codePointAt(0))\n} else {\n  ucs2decode = function(string) {\n    const output = []\n    let counter = 0\n    const { length } = string\n\n    while (counter < length) {\n      let value = string.charCodeAt(counter++)\n      if (0xd800 <= value && value <= 0xdbff && counter < length) {\n        // high surrogate, and there is a next character\n        const extra = string.charCodeAt(counter++)\n        if ((extra & 0xfc00) === 0xdc00) {\n          // low surrogate\n          value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000\n        } else {\n          // unmatched surrogate; only append this code unit, in case the\n          // next code unit is the high surrogate of a surrogate pair\n          counter--\n        }\n      }\n      output.push(value)\n    }\n\n    return output\n  }\n}\n\n// Creates a string based on an array of numeric code points.\nif (hasStringFromCodePoint) {\n  ucs2encode = (array) => String.fromCodePoint(...Array.from(array || []))\n} else {\n  ucs2encode = function(array) {\n    const characters = (() => {\n      const result = []\n\n      Array.from(array).forEach((value) => {\n        let output = \"\"\n        if (value > 0xffff) {\n          value -= 0x10000\n          output += String.fromCharCode(value >>> 10 & 0x3ff | 0xd800)\n          value = 0xdc00 | value & 0x3ff\n        }\n        result.push(output + String.fromCharCode(value))\n      })\n\n      return result\n    })()\n\n    return characters.join(\"\")\n  }\n}\n","/* eslint-disable\n    id-length,\n    no-useless-escape,\n*/\nimport { NON_BREAKING_SPACE, ZERO_WIDTH_SPACE } from \"trix/constants\"\nimport UTF16String from \"trix/core/utilities/utf16_string\"\n\nexport const normalizeSpaces = (string) =>\n  string.replace(new RegExp(`${ZERO_WIDTH_SPACE}`, \"g\"), \"\").replace(new RegExp(`${NON_BREAKING_SPACE}`, \"g\"), \" \")\n\nexport const normalizeNewlines = (string) => string.replace(/\\r\\n/g, \"\\n\")\n\nexport const breakableWhitespacePattern = new RegExp(`[^\\\\S${NON_BREAKING_SPACE}]`)\n\nexport const squishBreakableWhitespace = (string) =>\n  string\n    // Replace all breakable whitespace characters with a space\n    .replace(new RegExp(`${breakableWhitespacePattern.source}`, \"g\"), \" \")\n    // Replace two or more spaces with a single space\n    .replace(/\\ {2,}/g, \" \")\n\nexport const summarizeStringChange = function(oldString, newString) {\n  let added, removed\n  oldString = UTF16String.box(oldString)\n  newString = UTF16String.box(newString)\n\n  if (newString.length < oldString.length) {\n    [ removed, added ] = utf16StringDifferences(oldString, newString)\n  } else {\n    [ added, removed ] = utf16StringDifferences(newString, oldString)\n  }\n\n  return { added, removed }\n}\n\nconst utf16StringDifferences = function(a, b) {\n  if (a.isEqualTo(b)) {\n    return [ \"\", \"\" ]\n  }\n\n  const diffA = utf16StringDifference(a, b)\n  const { length } = diffA.utf16String\n\n  let diffB\n\n  if (length) {\n    const { offset } = diffA\n    const codepoints = a.codepoints.slice(0, offset).concat(a.codepoints.slice(offset + length))\n    diffB = utf16StringDifference(b, UTF16String.fromCodepoints(codepoints))\n  } else {\n    diffB = utf16StringDifference(b, a)\n  }\n\n  return [ diffA.utf16String.toString(), diffB.utf16String.toString() ]\n}\n\nconst utf16StringDifference = function(a, b) {\n  let leftIndex = 0\n  let rightIndexA = a.length\n  let rightIndexB = b.length\n\n  while (leftIndex < rightIndexA && a.charAt(leftIndex).isEqualTo(b.charAt(leftIndex))) {\n    leftIndex++\n  }\n\n  while (rightIndexA > leftIndex + 1 && a.charAt(rightIndexA - 1).isEqualTo(b.charAt(rightIndexB - 1))) {\n    rightIndexA--\n    rightIndexB--\n  }\n\n  return {\n    utf16String: a.slice(leftIndex, rightIndexA),\n    offset: leftIndex,\n  }\n}\n","/* eslint-disable\n    id-length,\n*/\nimport { installDefaultCSSForTagName } from \"trix/core/helpers\"\n\ninstallDefaultCSSForTagName(\"trix-inspector\", `\\\n%t {\n  display: block;\n}\n\n%t {\n  position: fixed;\n  background: #fff;\n  border: 1px solid #444;\n  border-radius: 5px;\n  padding: 10px;\n  font-family: sans-serif;\n  font-size: 12px;\n  overflow: auto;\n  word-wrap: break-word;\n}\n\n%t details {\n  margin-bottom: 10px;\n}\n\n%t summary:focus {\n  outline: none;\n}\n\n%t details .panel {\n  padding: 10px;\n}\n\n%t .performance .metrics {\n  margin: 0 0 5px 5px;\n}\n\n%t .selection .characters {\n  margin-top: 10px;\n}\n\n%t .selection .character {\n  display: inline-block;\n  font-size: 8px;\n  font-family: courier, monospace;\n  line-height: 10px;\n  vertical-align: middle;\n  text-align: center;\n  width: 10px;\n  height: 10px;\n  margin: 0 1px 1px 0;\n  border: 1px solid #333;\n  border-radius: 1px;\n  background: #676666;\n  color: #fff;\n}\n\n%t .selection .character.selected {\n  background: yellow;\n  color: #000;\n}\\\n`)\n\nexport default class TrixInspector extends HTMLElement {\n  connectedCallback() {\n    this.editorElement = document.querySelector(`trix-editor[trix-id='${this.dataset.trixId}']`)\n    this.views = this.createViews()\n\n    this.views.forEach((view) => {\n      view.render()\n      this.appendChild(view.element)\n    })\n\n    this.reposition()\n\n    this.resizeHandler = this.reposition.bind(this)\n    addEventListener(\"resize\", this.resizeHandler)\n  }\n\n  disconnectedCallback() {\n    removeEventListener(\"resize\", this.resizeHandler)\n  }\n\n  createViews() {\n    const views = Trix.Inspector.views.map((View) => new View(this.editorElement))\n\n    return views.sort((a, b) => a.title.toLowerCase() > b.title.toLowerCase())\n  }\n\n  reposition() {\n    const { top, right } = this.editorElement.getBoundingClientRect()\n\n    this.style.top = `${top}px`\n    this.style.left = `${right + 10}px`\n    this.style.maxWidth = `${window.innerWidth - right - 40}px`\n    this.style.maxHeight = `${window.innerHeight - top - 30}px`\n  }\n}\n\nwindow.customElements.define(\"trix-inspector\", TrixInspector)\n","window.Trix.Inspector = {\n  views: [],\n\n  registerView(constructor) {\n    return this.views.push(constructor)\n  },\n\n  install(editorElement) {\n    this.editorElement = editorElement\n    const element = document.createElement(\"trix-inspector\")\n    element.dataset.trixId = this.editorElement.trixId\n    return document.body.appendChild(element)\n  },\n}\n","if (!window.JST) {\n  window.JST = {}\n}\n\nwindow.JST[\"trix/inspector/templates/debug\"] = function() {\n  return `\\\n<p>\n  <label>\n    <input type=\"checkbox\" name=\"viewCaching\" checked=\"${this.compositionController.isViewCachingEnabled()}\">\n    Cache views between renders\n  </label>\n</p>\n\n<p>\n  <button data-action=\"render\">Force Render</button> <button data-action=\"parse\">Parse current HTML</button>\n</p>\n\n<p>\n  <label>\n    <input type=\"checkbox\" name=\"controlElement\">\n    Show <code>contenteditable</code> control element\n  </label>\n</p>\\\n`\n}\n","if (!window.JST) {\n  window.JST = {}\n}\n\nwindow.JST[\"trix/inspector/templates/document\"] = function() {\n  const details = this.document.getBlocks().map((block, index) => {\n    const { text } = block\n    const pieces = text.pieceList.toArray()\n\n    return `<details class=\"block\">\n      <summary class=\"title\">\n        Block ${block.id}, Index: ${index}\n      </summary>\n      <div class=\"attributes\">\n        Attributes: ${JSON.stringify(block.attributes)}\n      </div>\n\n      <div class=\"text\">\n        <div class=\"title\">\n          Text: ${text.id}, Pieces: ${pieces.length}, Length: ${text.getLength()}\n        </div>\n        <div class=\"pieces\">\n          ${piecePartials(pieces).join(\"\\n\")}\n        </div>\n      </div>\n    </details>`\n  })\n\n  return details.join(\"\\n\")\n}\n\nconst piecePartials = (pieces) =>\n  pieces.map((piece, index) =>`<div class=\"piece\">\n      <div class=\"title\">\n        Piece ${piece.id}, Index: ${index}\n      </div>\n      <div class=\"attributes\">\n        Attributes: ${JSON.stringify(piece.attributes)}\n      </div>\n      <div class=\"content\">\n        ${JSON.stringify(piece.toString())}\n      </div>\n    </div>`)\n","if (!window.JST) {\n  window.JST = {}\n}\n\nwindow.JST[\"trix/inspector/templates/performance\"] = function() {\n  return Object.keys(this.data).map((name) => {\n      const data = this.data[name]\n      return dataMetrics(name, data, this.round)\n  }).join(\"\\n\")\n}\n\nconst dataMetrics = function(name, data, round) {\n  let item = `<strong>${name}</strong> (${data.calls})<br>`\n\n  if (data.calls > 0) {\n    item += `<div class=\"metrics\">\n        Mean: ${round(data.mean)}ms<br>\n        Max: ${round(data.max)}ms<br>\n        Last: ${round(data.last)}ms\n      </div>`\n\n    return item\n  }\n}\n","if (!window.JST) {\n  window.JST = {}\n}\n\nwindow.JST[\"trix/inspector/templates/render\"] = function() {\n  return `\\\nSyncs: ${this.syncCount}\\\n`\n}\n","if (!window.JST) {\n  window.JST = {}\n}\n\nwindow.JST[\"trix/inspector/templates/selection\"] = function() {\n  return `\nLocation range: [${this.locationRange[0].index}:${this.locationRange[0].offset}, ${this.locationRange[1].index}:${\n    this.locationRange[1].offset\n  }]\n\n${charSpans(this.characters).join(\"\\n\")}\\\n`\n}\n\nconst charSpans = (characters) =>\n  Array.from(characters).map(\n    (char) => `<span class=\"character ${char.selected ? \"selected\" : undefined}\">${char.string}</span>`\n  )\n","if (!window.JST) {\n  window.JST = {}\n}\n\nwindow.JST[\"trix/inspector/templates/undo\"] = function() {\n  return `\\\n<h4>Undo stack</h4>\n<ol class=\"undo-entries\">\n   ${entryList(this.undoEntries)}\n</ol>\n\n<h4>Redo stack</h4>\n<ol class=\"redo-entries\">\n  ${entryList(this.redoEntries)}\n</ol>\\\n`\n}\n\nconst entryList = (entries) =>\n  entries.map((entry) =>\n    `<li>${entry.description} ${JSON.stringify({\n      selectedRange: entry.snapshot.selectedRange,\n      context: entry.context,\n    })}</li>`)\n","const KEY_EVENTS = \"keydown keypress input\".split(\" \")\nconst COMPOSITION_EVENTS = \"compositionstart compositionupdate compositionend textInput\".split(\" \")\nconst OBSERVER_OPTIONS = {\n  attributes: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true,\n}\n\nexport default class ControlElement {\n  constructor(editorElement) {\n    this.didMutate = this.didMutate.bind(this)\n    this.editorElement = editorElement\n    this.install()\n  }\n\n  install() {\n    this.createElement()\n    this.logInputEvents()\n    this.logMutations()\n  }\n\n  uninstall() {\n    this.observer.disconnect()\n    this.element.parentNode.removeChild(this.element)\n  }\n\n  createElement() {\n    this.element = document.createElement(\"div\")\n    this.element.setAttribute(\"contenteditable\", \"\")\n    this.element.style.width = getComputedStyle(this.editorElement).width\n    this.element.style.minHeight = \"50px\"\n    this.element.style.border = \"1px solid green\"\n    this.editorElement.parentNode.insertBefore(this.element, this.editorElement.nextSibling)\n  }\n\n  logInputEvents() {\n    KEY_EVENTS.forEach((eventName) => {\n      this.element.addEventListener(eventName, (event) => console.log(`${event.type}: keyCode = ${event.keyCode}`))\n    })\n\n    COMPOSITION_EVENTS.forEach((eventName) => {\n      this.element.addEventListener(eventName, (event) =>\n        console.log(`${event.type}: data = ${JSON.stringify(event.data)}`)\n      )\n    })\n  }\n\n  logMutations() {\n    this.observer = new window.MutationObserver(this.didMutate)\n    this.observer.observe(this.element, OBSERVER_OPTIONS)\n  }\n\n  didMutate(mutations) {\n    console.log(`Mutations (${mutations.length}):`)\n    for (let index = 0; index < mutations.length; index++) {\n      const mutation = mutations[index]\n      console.log(` ${index + 1}. ${mutation.type}:`)\n      switch (mutation.type) {\n        case \"characterData\":\n          console.log(`  oldValue = ${JSON.stringify(mutation.oldValue)}, newValue = ${JSON.stringify(mutation.target.data)}`)\n          break\n        case \"childList\":\n          Array.from(mutation.addedNodes).forEach((node) => {\n            console.log(`  node added ${inspectNode(node)}`)\n          })\n\n          Array.from(mutation.removedNodes).forEach((node) => {\n            console.log(`  node removed ${inspectNode(node)}`)\n          })\n      }\n    }\n  }\n}\n\nconst inspectNode = function(node) {\n  if (node.data) {\n    return JSON.stringify(node.data)\n  } else {\n    return JSON.stringify(node.outerHTML)\n  }\n}\n","/* eslint-disable\n    no-undef,\n*/\nimport { handleEvent } from \"trix/core/helpers\"\n\nexport default class View {\n  constructor(editorElement) {\n    this.editorElement = editorElement\n    this.editorController = this.editorElement.editorController\n    this.editor = this.editorElement.editor\n    this.compositionController = this.editorController.compositionController\n    this.composition = this.editorController.composition\n\n    this.element = document.createElement(\"details\")\n    if (this.getSetting(\"open\") === \"true\") {\n      this.element.open = true\n    }\n    this.element.classList.add(this.constructor.template)\n\n    this.titleElement = document.createElement(\"summary\")\n    this.element.appendChild(this.titleElement)\n\n    this.panelElement = document.createElement(\"div\")\n    this.panelElement.classList.add(\"panel\")\n    this.element.appendChild(this.panelElement)\n\n    this.element.addEventListener(\"toggle\", (event) => {\n      if (event.target === this.element) {\n        return this.didToggle()\n      }\n    })\n\n    if (this.events) {\n      this.installEventHandlers()\n    }\n  }\n\n  installEventHandlers() {\n    for (const eventName in this.events) {\n      const handler = this.events[eventName]\n      const callback = (event) => {\n        requestAnimationFrame(() => {\n          handler.call(this, event)\n        })\n      }\n\n      handleEvent(eventName, { onElement: this.editorElement, withCallback: callback })\n    }\n  }\n\n  didToggle(event) {\n    this.saveSetting(\"open\", this.isOpen())\n    return this.render()\n  }\n\n  isOpen() {\n    return this.element.hasAttribute(\"open\")\n  }\n\n  getTitle() {\n    return this.title || \"\"\n  }\n\n  render() {\n    this.renderTitle()\n    if (this.isOpen()) {\n      this.panelElement.innerHTML = JST[`trix/inspector/templates/${this.constructor.template}`].apply(this)\n    }\n  }\n\n  renderTitle() {\n    this.titleElement.innerHTML = this.getTitle()\n  }\n\n  getSetting(key) {\n    key = this.getSettingsKey(key)\n    return window.sessionStorage?.[key]\n  }\n\n  saveSetting(key, value) {\n    key = this.getSettingsKey(key)\n    if (window.sessionStorage) {\n      window.sessionStorage[key] = value\n    }\n  }\n\n  getSettingsKey(key) {\n    return `trix/inspector/${this.template}/${key}`\n  }\n\n  get title() {\n    return this.constructor.title\n  }\n\n  get template() {\n    return this.constructor.template\n  }\n\n  get events() {\n    return this.constructor.events\n  }\n}\n","import View from \"inspector/view\"\n\nimport { handleEvent } from \"trix/core/helpers\"\n\nclass DebugView extends View {\n  static title = \"Debug\"\n  static template = \"debug\"\n\n  constructor() {\n    super(...arguments)\n    this.didToggleViewCaching = this.didToggleViewCaching.bind(this)\n    this.didClickRenderButton = this.didClickRenderButton.bind(this)\n    this.didClickParseButton = this.didClickParseButton.bind(this)\n    this.didToggleControlElement = this.didToggleControlElement.bind(this)\n\n    handleEvent(\"change\", {\n      onElement: this.element,\n      matchingSelector: \"input[name=viewCaching]\",\n      withCallback: this.didToggleViewCaching,\n    })\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"button[data-action=render]\",\n      withCallback: this.didClickRenderButton,\n    })\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"button[data-action=parse]\",\n      withCallback: this.didClickParseButton,\n    })\n    handleEvent(\"change\", {\n      onElement: this.element,\n      matchingSelector: \"input[name=controlElement]\",\n      withCallback: this.didToggleControlElement,\n    })\n  }\n\n  didToggleViewCaching({ target }) {\n    if (target.checked) {\n      return this.compositionController.enableViewCaching()\n    } else {\n      return this.compositionController.disableViewCaching()\n    }\n  }\n\n  didClickRenderButton() {\n    return this.editorController.render()\n  }\n\n  didClickParseButton() {\n    return this.editorController.reparse()\n  }\n\n  didToggleControlElement({ target }) {\n    if (target.checked) {\n      this.control = new Trix.Inspector.ControlElement(this.editorElement)\n    } else {\n      this.control?.uninstall()\n      this.control = null\n    }\n  }\n}\n\nTrix.Inspector.registerView(DebugView)\n","import View from \"inspector/view\"\n\nclass DocumentView extends View {\n  static title = \"Document\"\n  static template = \"document\"\n  static events = {\n    \"trix-change\": function() {\n      return this.render()\n    },\n  }\n\n  render() {\n    this.document = this.editor.getDocument()\n    return super.render(...arguments)\n  }\n}\n\nTrix.Inspector.registerView(DocumentView)\n","import View from \"inspector/view\"\nconst now = window.performance?.now ? () => performance.now() : () => new Date().getTime()\n\nclass PerformanceView extends View {\n  static title = \"Performance\"\n  static template = \"performance\"\n\n  constructor() {\n    super(...arguments)\n    this.documentView = this.compositionController.documentView\n\n    this.data = {}\n    this.track(\"documentView.render\")\n    this.track(\"documentView.sync\")\n    this.track(\"documentView.garbageCollectCachedViews\")\n    this.track(\"composition.replaceHTML\")\n\n    this.render()\n  }\n\n  track(methodPath) {\n    this.data[methodPath] = { calls: 0, total: 0, mean: 0, max: 0, last: 0 }\n    const parts = methodPath.split(\".\")\n    const propertyNames = parts.slice(0, parts.length - 1)\n    const methodName = parts[parts.length - 1]\n\n    let object = this\n\n    propertyNames.forEach((propertyName) => {\n      object = object[propertyName]\n    })\n\n    const original = object[methodName]\n\n    object[methodName] = function() {\n      const started = now()\n      const result = original.apply(object, arguments)\n      const timing = now() - started\n      this.record(methodPath, timing)\n      return result\n    }.bind(this)\n  }\n\n  record(methodPath, timing) {\n    const data = this.data[methodPath]\n    data.calls += 1\n    data.total += timing\n    data.mean = data.total / data.calls\n    if (timing > data.max) {\n      data.max = timing\n    }\n    data.last = timing\n    return this.render()\n  }\n\n  round(ms) {\n    return Math.round(ms * 1000) / 1000\n  }\n}\n\nTrix.Inspector.registerView(PerformanceView)\n","import View from \"inspector/view\"\n\nexport default class RenderView extends View {\n  static title = \"Renders\"\n  static template = \"render\"\n  static events = {\n    \"trix-render\": function() {\n      this.renderCount++\n      return this.render()\n    },\n\n    \"trix-sync\": function() {\n      this.syncCount++\n      return this.render()\n    },\n  }\n\n  constructor() {\n    super(...arguments)\n    this.renderCount = 0\n    this.syncCount = 0\n  }\n\n  getTitle() {\n    return `${this.title} (${this.renderCount})`\n  }\n}\n\nTrix.Inspector.registerView(RenderView)\n","import View from \"inspector/view\"\nimport UTF16String from \"trix/core/utilities/utf16_string\"\n\nclass SelectionView extends View {\n  static title = \"Selection\"\n  static template = \"selection\"\n  static events = {\n    \"trix-selection-change\": function() {\n      return this.render()\n    },\n    \"trix-render\": function() {\n      return this.render()\n    },\n  }\n\n  render() {\n    this.document = this.editor.getDocument()\n    this.range = this.editor.getSelectedRange()\n    this.locationRange = this.composition.getLocationRange()\n    this.characters = this.getCharacters()\n    return super.render(...arguments)\n  }\n\n  getCharacters() {\n    const chars = []\n    const utf16string = UTF16String.box(this.document.toString())\n    const rangeIsExpanded = this.range[0] !== this.range[1]\n    let position = 0\n    while (position < utf16string.length) {\n      let string = utf16string.charAt(position).toString()\n      if (string === \"\\n\") {\n        string = \"⏎\"\n      }\n      const selected = rangeIsExpanded && position >= this.range[0] && position < this.range[1]\n      chars.push({ string, selected })\n      position++\n    }\n    return chars\n  }\n\n  getTitle() {\n    return `${this.title} (${this.range.join()})`\n  }\n}\n\nTrix.Inspector.registerView(SelectionView)\n","import View from \"inspector/view\"\n\nclass UndoView extends View {\n  static title = \"Undo\"\n  static template = \"undo\"\n  static events = {\n    \"trix-change\": function() {\n      return this.render()\n    },\n  }\n\n  render() {\n    this.undoEntries = this.editor.undoManager.undoEntries\n    this.redoEntries = this.editor.undoManager.redoEntries\n    return super.render(...arguments)\n  }\n}\n\nTrix.Inspector.registerView(UndoView)\n"],"names":["arraysAreEqual","a","b","length","index","value","arrayStartsWith","slice","spliceArray","array","result","args","splice","summarizeArrayChange","oldArray","newArray","added","removed","existingValues","Set","forEach","add","currentValues","has","push","attachmentSelector","attachments","preview","presentation","caption","name","size","file","attributes","default","tagName","parse","quote","nestable","heading1","terminal","breakOnReturn","group","code","text","plaintext","bulletList","bullet","listAttribute","test","element","parentNode","numberList","number","attachmentGallery","exclusive","toLowerCase","composesExistingText","navigator","userAgent","forcesObjectResizing","supportsInputEvents","InputEvent","property","prototype","attachment","attachmentCaption","attachmentCaptionEditor","attachmentMetadata","attachmentMetadataContainer","attachmentName","attachmentProgress","attachmentSize","attachmentToolbar","attachFiles","bold","bullets","byte","bytes","captionPlaceholder","indent","italic","link","numbers","outdent","redo","remove","strike","undo","unlink","url","urlPlaceholder","GB","KB","MB","PB","TB","sizes","lang","prefix","precision","formatter","base","exp","Math","floor","log","humanSize","pow","string","toFixed","withoutInsignificantZeros","replace","input","level2Enabled","getLevel","browser","inheritable","parser","style","window","getComputedStyle","fontWeight","fontStyle","href","groupTagName","matchingSelector","closest","getAttribute","frozen","backgroundColor","getDefaultHTML","undoInterval","config","blockAttributes","css","fileSize","keyNames","textAttributes","toolbar","ZERO_WIDTH_SPACE","NON_BREAKING_SPACE","OBJECT_REPLACEMENT_CHARACTER","extend","properties","key","html","document","documentElement","match","matches","handleEvent","eventName","onElement","withCallback","inPhase","preventDefault","times","selector","useCapture","handler","event","destroy","target","findClosestElementFromNode","call","removeEventListener","addEventListener","handleEventOnce","options","triggerEvent","bubbles","cancelable","createEvent","initEvent","dispatchEvent","elementMatchesSelector","nodeType","node","untilNode","Node","ELEMENT_NODE","findInnerElement","firstElementChild","innerElementIsActive","activeElement","elementContainsNode","findNodeFromContainerAndOffset","container","offset","TEXT_NODE","firstChild","childNodes","item","findElementFromContainerAndOffset","findChildIndexOfNode","childIndex","previousSibling","removeNode","removeChild","walkTree","tree","onlyNodesOfType","usingFilter","expandEntityReferences","whatToShow","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","SHOW_COMMENT","SHOW_ALL","createTreeWalker","makeElement","tag","createElement","editable","contenteditable","setAttribute","data","dataset","className","split","classList","textContent","concat","childNode","appendChild","blockTagNames","undefined","getBlockTagNames","nodeIsBlockContainer","nodeIsBlockStartComment","nodeProbablyIsBlockContainer","includes","nodeIsBlockStart","strict","nodeIsCommentNode","COMMENT_NODE","nodeIsCursorTarget","nodeIsTextNode","trixCursorTarget","nodeIsAttachmentElement","nodeIsEmptyTextNode","RTL_PATTERN","getDirection","dir","dirName","form","supportsDirName","FormData","error","supportsDirSelector","get","char","trim","charAt","allAttributeNames","blockAttributeNames","textAttributeNames","listAttributeNames","getAllAttributeNames","getTextAttributeNames","getBlockAttributeNames","getBlockConfig","attributeName","Object","keys","getTextConfig","getListAttributeNames","installDefaultCSSForTagName","defaultCSS","styleElement","insertStyleElementForTagName","nonce","getCSPNonce","head","insertBefore","getMetaElement","querySelector","testTransferData","dataTransferIsPlainText","dataTransfer","getData","body","DOMParser","parseFromString","dataTransferIsWritable","setData","keyEventIsKeyboardCommand","platform","metaKey","ctrlKey","defer","fn","setTimeout","copyObject","object","objectsAreEqual","normalizeRange","range","Array","isArray","copyValue","rangeIsCollapsed","start","end","rangeValuesAreEqual","rangesAreEqual","leftRange","rightRange","leftStart","leftEnd","rightStart","rightEnd","left","right","BasicObject","proxyMethod","expression","toMethod","toProperty","optional","parseProxyMethodExpression","subject","apply","arguments","proxyMethodExpressionPattern","Error","Function","RegExp","SelectionChangeObserver","constructor","update","bind","run","selectionManagers","started","stop","registerSelectionManager","selectionManager","unregisterSelectionManager","filter","s","notifySelectionManagersOfSelectionChange","map","selectionDidChange","domRange","getDOMRange","domRangesAreEqual","reset","requestAnimationFrame","startContainer","startOffset","endContainer","endOffset","selectionChangeObserver","getDOMSelection","selection","getSelection","rangeCount","getRangeAt","domRangeIsPrivate","setDOMRange","removeAllRanges","addRange","nodeIsPrivate","getPrototypeOf","UTF16String","box","fromUCS2String","toString","ucs2String","ucs2decode","fromCodepoints","codepoints","ucs2encode","ucs2Length","offsetToUCS2Offset","max","offsetFromUCS2Offset","ucs2Offset","isEqualTo","toJSON","getCacheKey","hasArrayFrom","from","hasStringCodePointAt","codePointAt","hasStringFromCodePoint","String","fromCodePoint","output","counter","charCodeAt","extra","characters","fromCharCode","join","normalizeSpaces","normalizeNewlines","breakableWhitespacePattern","squishBreakableWhitespace","source","summarizeStringChange","oldString","newString","utf16StringDifferences","diffA","utf16StringDifference","utf16String","diffB","leftIndex","rightIndexA","rightIndexB","TrixInspector","HTMLElement","connectedCallback","editorElement","trixId","views","createViews","view","render","reposition","resizeHandler","disconnectedCallback","Trix","Inspector","View","sort","title","top","getBoundingClientRect","maxWidth","innerWidth","maxHeight","innerHeight","customElements","define","registerView","install","JST","compositionController","isViewCachingEnabled","details","getBlocks","block","pieces","pieceList","toArray","id","JSON","stringify","getLength","piecePartials","piece","dataMetrics","round","calls","mean","last","syncCount","locationRange","charSpans","selected","entryList","undoEntries","redoEntries","entries","entry","description","selectedRange","snapshot","context","KEY_EVENTS","COMPOSITION_EVENTS","OBSERVER_OPTIONS","childList","characterData","characterDataOldValue","subtree","ControlElement","didMutate","logInputEvents","logMutations","uninstall","observer","disconnect","width","minHeight","border","nextSibling","console","type","keyCode","MutationObserver","observe","mutations","mutation","oldValue","addedNodes","inspectNode","removedNodes","outerHTML","editorController","editor","composition","getSetting","open","template","titleElement","panelElement","didToggle","events","installEventHandlers","callback","saveSetting","isOpen","hasAttribute","getTitle","renderTitle","innerHTML","getSettingsKey","sessionStorage","DebugView","didToggleViewCaching","didClickRenderButton","didClickParseButton","didToggleControlElement","checked","enableViewCaching","disableViewCaching","reparse","control","DocumentView","getDocument","now","performance","Date","getTime","PerformanceView","documentView","track","methodPath","total","parts","propertyNames","methodName","propertyName","original","timing","record","ms","RenderView","renderCount","SelectionView","getSelectedRange","getLocationRange","getCharacters","chars","utf16string","rangeIsExpanded","position","UndoView","undoManager"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}